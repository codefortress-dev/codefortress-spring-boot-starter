server:
  port: 8080

spring:
  application:
    name: codefortress-demo-app
  datasource:
    url: jdbc:h2:mem:testdb
    driverClassName: org.h2.Driver
    username: sa
    password:
  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
    hibernate:
      ddl-auto: update # Esto permitirá que tu JPA Adapter cree las tablas cf_users automáticamente
    show-sql: true

# CONFIGURACIÓN DE TU LIBRERÍA
codefortress:
  security:
    jwt-secret: "Q29kZUZvcnRyZXNzU2VjcmV0S2V5Rm9yRGVtb0FwcDIwMjVWZXJpZnkhIQ==" # Mínimo 256 bits
    routes:
      - pattern: "/api/public/**"
        roles: [ "PUBLIC" ]
      - pattern: "/api/private/**"
        roles: [ "ADMIN" ]

      # CAMBIO: api
    api:
      enabled: true
      auth-path: "/auth"

    jwt-expiration-ms: 300000 # 5 minutos (corto por seguridad)
    refresh-token:
      enabled: true
      expiration-ms: 3000000

    cors:
      enabled: true
      allowed-origins:
        - "http://localhost:3000" # Simulamos un Frontend React
        - "http://localhost:4200"
  password:
    min-length: 10
    # Esta Regex exige: Al menos 1 número, 1 minúscula, 1 mayúscula, 1 caracter especial (@#$%^&+=)
    regexp: "^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=])(?=\\S+$).{8,}$"
    regexp-error-message: "Tu contraseña es muy debil. Debe tener Mayúsculas, Números y Simbolos."

  rate-limit:
    enabled: true
    max-attempts: 3
    duration-seconds: 300

